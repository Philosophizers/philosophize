{"ast":null,"code":"// src/store/topics.js\n\nconst GET_TOPICS = 'topics/GET_TOPICS';\nconst CREATE_TOPIC = 'topics/CREATE_TOPIC';\nconst REMOVE_TOPIC = 'topics/REMOVE_TOPIC';\nconst UPDATE_TOPIC = 'topics/UPDATE_TOPIC';\nconst SET_TOPIC_OF_THE_DAY = 'topics/SET_TOPIC_OF_THE_DAY';\nconst GET_COMMENTS = 'topics/GET_COMMENTS';\nconst ADD_COMMENT = 'topics/ADD_COMMENT';\n\n// Action Creators\nconst getTopics = topics => ({\n  type: GET_TOPICS,\n  topics\n});\nexport const addTopic = topic => ({\n  type: CREATE_TOPIC,\n  topic\n});\n\n// Thunk Action Creators\nexport const fetchTopics = () => async dispatch => {\n  const response = await fetch('/api/topics');\n  if (response.ok) {\n    const topics = await response.json();\n    dispatch(getTopics(topics));\n  }\n};\nexport const updateTopic = topic => ({\n  type: UPDATE_TOPIC,\n  topic\n});\nexport const editTopic = (topicId, topicData) => async dispatch => {\n  const response = await fetch(`/api/topics/${topicId}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(topicData),\n    credentials: 'include'\n  });\n  if (response.ok) {\n    const updatedTopic = await response.json();\n    dispatch(updateTopic(updatedTopic));\n    return updatedTopic;\n  } else {\n    const errors = await response.json();\n    return errors;\n  }\n};\nexport const removeTopic = topicId => ({\n  type: REMOVE_TOPIC,\n  topicId\n});\nexport const createTopic = topicData => async dispatch => {\n  const response = await fetch('/api/topics/banana', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(topicData)\n    // body: formInfo\n  });\n\n  if (response.ok) {\n    const newTopic = await response.json();\n    dispatch(addTopic(newTopic));\n    return newTopic;\n  } else {\n    const errors = await response.json();\n    return errors;\n  }\n};\n\n// Add new action creators\nexport const setTopicOfTheDay = topic => ({\n  type: SET_TOPIC_OF_THE_DAY,\n  topic\n});\nexport const getComments = comments => ({\n  type: GET_COMMENTS,\n  comments\n});\nexport const addComment = comment => ({\n  type: ADD_COMMENT,\n  comment\n});\n\n// Thunk for fetching the topic of the day\nexport const fetchTopicOfTheDay = () => async dispatch => {\n  const response = await fetch('/api/topics/topic-of-the-day');\n  if (response.ok) {\n    const topic = await response.json();\n    dispatch(setTopicOfTheDay(topic));\n  }\n};\n\n// Thunk for fetching comments of the topic of the day\nexport const fetchCommentsForTopic = topicId => async dispatch => {\n  const response = await fetch(`/api/comments/${topicId}`);\n  if (response.ok) {\n    const comments = await response.json();\n    dispatch(getComments(comments));\n  }\n};\n\n// Thunk for posting a new comment (if needed)\n// ...\n\n// Adjust the initial state\nconst initialState = {\n  topics: {},\n  // Existing topics state\n  topicOfTheDay: null,\n  // New state for Topic of the Day\n  comments: {} // New state for comments\n};\n\n// Reducer\n\n// export default function topicsReducer(state = initialState, action) {\n//   switch (action.type) {\n//       case GET_TOPICS:\n//           const topicsNormalized = {};\n//           action.topics.forEach(topic => {\n//               topicsNormalized[topic.id] = topic;\n//           });\n//           return { ...state, ...topicsNormalized };\n//       case CREATE_TOPIC:\n//           return { ...state, [action.topic.id]: action.topic };\n//       default:\n//           return state;\n//   }\n// }\n\nexport default function topicsReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case GET_TOPICS:\n      return {\n        ...state,\n        ...Object.fromEntries(action.topics.map(topic => [topic.id, topic]))\n      };\n    case CREATE_TOPIC:\n      return {\n        ...state,\n        [action.topic.id]: action.topic\n      };\n    case UPDATE_TOPIC:\n      return {\n        ...state,\n        [action.topic.id]: action.topic\n      };\n    case REMOVE_TOPIC:\n      const newState = {\n        ...state\n      };\n      delete newState[action.topicId];\n      return newState;\n    case SET_TOPIC_OF_THE_DAY:\n      return {\n        ...state,\n        topicOfTheDay: action.topic\n      };\n    case GET_COMMENTS:\n      return {\n        ...state,\n        comments: {\n          ...action.comments\n        }\n      };\n    case ADD_COMMENT:\n      // Logic to add a new comment to the state\n      return {\n        ...state,\n        comments: {\n          ...state.comments,\n          [action.comment.id]: action.comment\n        }\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["GET_TOPICS","CREATE_TOPIC","REMOVE_TOPIC","UPDATE_TOPIC","SET_TOPIC_OF_THE_DAY","GET_COMMENTS","ADD_COMMENT","getTopics","topics","type","addTopic","topic","fetchTopics","dispatch","response","fetch","ok","json","updateTopic","editTopic","topicId","topicData","method","headers","body","JSON","stringify","credentials","updatedTopic","errors","removeTopic","createTopic","newTopic","setTopicOfTheDay","getComments","comments","addComment","comment","fetchTopicOfTheDay","fetchCommentsForTopic","initialState","topicOfTheDay","topicsReducer","state","action","Object","fromEntries","map","id","newState"],"sources":["/Users/yosephlatif/Desktop/philosophize/react-app/src/store/topics.js"],"sourcesContent":["// src/store/topics.js\n\n\nconst GET_TOPICS = 'topics/GET_TOPICS';\nconst CREATE_TOPIC = 'topics/CREATE_TOPIC';\nconst REMOVE_TOPIC = 'topics/REMOVE_TOPIC';\nconst UPDATE_TOPIC = 'topics/UPDATE_TOPIC';\nconst SET_TOPIC_OF_THE_DAY = 'topics/SET_TOPIC_OF_THE_DAY';\nconst GET_COMMENTS = 'topics/GET_COMMENTS';\nconst ADD_COMMENT = 'topics/ADD_COMMENT';\n\n\n// Action Creators\nconst getTopics = (topics) => ({\n    type: GET_TOPICS,\n    topics\n});\n\nexport const addTopic = (topic) => ({\n    type: CREATE_TOPIC,\n    topic\n});\n\n// Thunk Action Creators\nexport const fetchTopics = () => async (dispatch) => {\n  const response = await fetch('/api/topics');\n  if (response.ok) {\n    const topics = await response.json();\n    dispatch(getTopics(topics));\n  }\n};\n\nexport const updateTopic = (topic) => ({\n  type: UPDATE_TOPIC,\n  topic\n});\n\nexport const editTopic = (topicId, topicData) => async (dispatch) => {\n  const response = await fetch(`/api/topics/${topicId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(topicData),\n      credentials: 'include',\n  });\n\n  if (response.ok) {\n      const updatedTopic = await response.json();\n      dispatch(updateTopic(updatedTopic));\n      return updatedTopic;\n  } else {\n      const errors = await response.json();\n      return errors;\n  }\n};\n\n\n\nexport const removeTopic = (topicId) => ({\n  type: REMOVE_TOPIC,\n  topicId\n});\n\n\nexport const createTopic = (topicData) => async (dispatch) => {\n    const response = await fetch('/api/topics/banana', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(topicData)\n        // body: formInfo\n    });\n\n    if (response.ok) {\n        const newTopic = await response.json();\n        dispatch(addTopic(newTopic));\n        return newTopic;\n    } else {\n        const errors = await response.json();\n        return errors;\n    }\n};\n\n// Add new action creators\nexport const setTopicOfTheDay = (topic) => ({\n  type: SET_TOPIC_OF_THE_DAY,\n  topic\n});\n\nexport const getComments = (comments) => ({\n  type: GET_COMMENTS,\n  comments\n});\n\nexport const addComment = (comment) => ({\n  type: ADD_COMMENT,\n  comment\n});\n\n// Thunk for fetching the topic of the day\nexport const fetchTopicOfTheDay = () => async (dispatch) => {\n  const response = await fetch('/api/topics/topic-of-the-day');\n  if (response.ok) {\n      const topic = await response.json();\n      dispatch(setTopicOfTheDay(topic));\n  }\n};\n\n// Thunk for fetching comments of the topic of the day\nexport const fetchCommentsForTopic = (topicId) => async (dispatch) => {\n  const response = await fetch(`/api/comments/${topicId}`);\n  if (response.ok) {\n      const comments = await response.json();\n      dispatch(getComments(comments));\n  }\n};\n\n// Thunk for posting a new comment (if needed)\n// ...\n\n// Adjust the initial state\nconst initialState = {\n  topics: {}, // Existing topics state\n  topicOfTheDay: null, // New state for Topic of the Day\n  comments: {}, // New state for comments\n};\n\n// Reducer\n\n// export default function topicsReducer(state = initialState, action) {\n//   switch (action.type) {\n//       case GET_TOPICS:\n//           const topicsNormalized = {};\n//           action.topics.forEach(topic => {\n//               topicsNormalized[topic.id] = topic;\n//           });\n//           return { ...state, ...topicsNormalized };\n//       case CREATE_TOPIC:\n//           return { ...state, [action.topic.id]: action.topic };\n//       default:\n//           return state;\n//   }\n// }\n\n\nexport default function topicsReducer(state = initialState, action) {\n  switch (action.type) {\n      case GET_TOPICS:\n          return { ...state, ...Object.fromEntries(action.topics.map(topic => [topic.id, topic])) };\n      case CREATE_TOPIC:\n          return { ...state, [action.topic.id]: action.topic };\n      case UPDATE_TOPIC:\n            return {\n                ...state,\n                [action.topic.id]: action.topic\n            };\n      case REMOVE_TOPIC:\n          const newState = { ...state };\n          delete newState[action.topicId];\n          return newState;\n      case SET_TOPIC_OF_THE_DAY:\n            return { ...state, topicOfTheDay: action.topic };\n        case GET_COMMENTS:\n            return { ...state, comments: { ...action.comments } };\n        case ADD_COMMENT:\n            // Logic to add a new comment to the state\n            return { ...state, comments: { ...state.comments, [action.comment.id]: action.comment } };\n      \n      default:\n          return state;\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}